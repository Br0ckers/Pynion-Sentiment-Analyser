{% extends "base.html" %}
{% block content %}

<main role="main" class="container">
  <div class="row">
    <div class="col-lg-6">
  <span class="first">
           <h4> Below analysis uses NLTK based textblob library to obtain the sentiments from tweets.
            The code behind uses tweepy twitter API to authenticate to twitter using the dev API token.
            Every tweet is parsed and cleaned, links and special char get removed before being passed to
            the textblob library that evaluates the sentiment based on Positive, Negative & Neutral features created</h4>
			Search Results:
  </span>

  <ul class="timeline", style="list-style: none;">
    <div class="bubble-container">
    <b>Sentiment(in Percentage)</b>
    <div class="bubble">
        <li>Positive: {{ session['pos'] }} %</li>
        <li>Negative: {{ session['neg'] }} %</li>
        <li>Neutral : {{ session['nue'] }} %</li>
    </div>
    <div id="piechart" class="bubble2"> </div>
    </div>

    <li><div class="bubble-container">Positive Tweets:</div></li>
    {% for twee1 in session['ptweet'] %}
        <li>
            <div class="bubble-container">
            <div class="bubble">
                {{ twee1 }}
            </div>
            </div>
        </li>
    {% endfor %}
    <li>
     <div class="bubble-container">
       Negative Tweets:
     </div>
    </li>
    {% for twee2 in session['ntweet'] %}
        <li>
            <div class="bubble-container">
            <div class="bubble">
                {{ twee2 }}
            </div>
            </div>
        </li>
    {% endfor %}
</ul>
</div>
<div class="col-md-6">
  <div class="content-section">

<div id="piechart" class="bubble2">
</div>


<div class="bubble-container">
    <div class="bubble">
      <h5>Word Cloud for Search Results</h5>
      <img src="/static/word_cloud.png">
    </div>
</div>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
// Load google charts
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);

// Draw the chart and set the chart values
function drawChart() {
  var data = google.visualization.arrayToDataTable([
  ['Sentiment', 'Percentage'],
  ['Positive', {{ session['pos'] }}],
  ['Negative', {{ session['neg'] }}],
  ['Neutral', {{ session['nue'] }}]
]);

  // Optional; add a title and set the width and height of the chart
  var options = {'title':'Twitter Sentiments', 'width':450, 'height':400};

  // Display the chart inside the <div> element with id="piechart"
  var chart = new google.visualization.PieChart(document.getElementById('piechart'));
  chart.draw(data, options);
}
</script>
</div>
</div>
</div>
</main>

{% endblock content %}
